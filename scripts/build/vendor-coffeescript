#!/usr/bin/env sh

rm -rf vendor/*

# download minified CoffeeScript versions
for v in "2.0.0-alpha1" "2.0.0-beta1" "2.0.0-beta2" "2.0.0-beta3" "2.0.0-beta4"; do
  curl -s https://raw.githubusercontent.com/jashkenas/coffeescript/$v/docs/v2/browser-compiler/coffeescript.js > vendor/coffeescript-$v.min.js
done

for v in "1.12.0" "1.12.1" "1.12.2" "1.12.3" "1.12.4" "1.12.5" "1.12.6" "1.12.7"; do
  curl -s https://raw.githubusercontent.com/jashkenas/coffeescript/$v/docs/v1/browser-compiler/coffee-script.js > vendor/coffeescript-$v.min.js
done

for v in "1.10.0" "1.11.0" "1.11.1"; do
  curl -s https://raw.githubusercontent.com/jashkenas/coffeescript/$v/extras/coffee-script.js > vendor/coffeescript-$v.min.js
done

# create a versions manifest that can be used by the build process
echo $(cat <<EOF
// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\n
module.exports = [
  '2.0.0-beta4',
  '2.0.0-beta3',
  '2.0.0-beta2',
  '2.0.0-alpha1',
  '1.12.7',
  '1.12.6',
  '1.12.5',
  '1.12.4',
  '1.12.3',
  '1.12.2',
  '1.12.1',
  '1.12.0',
  '1.11.1',
  '1.11.0',
  '1.10.0'
]
EOF
) > coffeescript-versions.js

# create a versions & compilers manifest that can be used by the app
echo $(cat <<EOF
// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\n
module.exports = {
  compilers: [
    require('coffeescript-2.0.0-beta4'),
    require('coffeescript-2.0.0-beta3'),
    require('coffeescript-2.0.0-beta2'),
    require('coffeescript-2.0.0-alpha1'),
    require('coffeescript-1.12.7'),
    require('coffeescript-1.12.6'),
    require('coffeescript-1.12.5'),
    require('coffeescript-1.12.4'),
    require('coffeescript-1.12.3'),
    require('coffeescript-1.12.2'),
    require('coffeescript-1.12.1'),
    require('coffeescript-1.12.0'),
    require('coffeescript-1.11.1'),
    require('coffeescript-1.11.0'),
    require('coffeescript-1.10.0')
  ], versions: [
    '2.0.0-beta4',
    '2.0.0-beta3',
    '2.0.0-beta2',
    '2.0.0-alpha1',
    '1.12.7',
    '1.12.6',
    '1.12.5',
    '1.12.4',
    '1.12.3',
    '1.12.2',
    '1.12.1',
    '1.12.0',
    '1.11.1',
    '1.11.0',
    '1.10.0'
  ]
}
EOF
) > ./src/app/coffeescript-manifest.js
